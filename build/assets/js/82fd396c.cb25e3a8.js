(self.webpackChunkopentezos=self.webpackChunkopentezos||[]).push([[4847],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var i=a.createContext({}),c=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=l,h=d["".concat(i,".").concat(m)]||d[m]||u[m]||r;return n?a.createElement(h,o(o({ref:t},p),{},{components:n})):a.createElement(h,o({ref:t},p))}));function m(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,o=new Array(r);o[0]=d;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:l,o[1]=s;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},267:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},metadata:function(){return s},toc:function(){return i},default:function(){return p}});var a=n(2122),l=n(9756),r=(n(7294),n(3905)),o={id:"installation",title:"Installation",authors:"Maxime Sallerin and Thomas Zoughebi"},s={unversionedId:"deploy-a-node/installation",id:"deploy-a-node/installation",isDocsHomePage:!1,title:"Installation",description:"In this chapter, we will see how to install Tezos from source with Unbuntu and macOS.",source:"@site/docs/deploy-a-node/installation.md",sourceDirName:"deploy-a-node",slug:"/deploy-a-node/installation",permalink:"/deploy-a-node/installation",editUrl:"https://github.com/octo-technology/OpenTezos/tree/main/docs/deploy-a-node/installation.md",version:"current",lastUpdatedBy:"Maxime Sallerin",lastUpdatedAt:1623334006,formattedLastUpdatedAt:"6/10/2021",frontMatter:{id:"installation",title:"Installation",authors:"Maxime Sallerin and Thomas Zoughebi"},sidebar:"docs",previous:{title:"Introduction",permalink:"/deploy-a-node"},next:{title:"Set-up a node",permalink:"/deploy-a-node/set-up-a-node"}},i=[{value:"Build from source (Ubuntu)",id:"build-from-source-ubuntu",children:[{value:"Install the libraries that Tezos is dependent on",id:"install-the-libraries-that-tezos-is-dependent-on",children:[]},{value:"Install Rust",id:"install-rust",children:[]},{value:"Install Zcash Parameters",id:"install-zcash-parameters",children:[]},{value:"Install OPAM",id:"install-opam",children:[]},{value:"Get sources",id:"get-sources",children:[]},{value:"Install Tezos dependencies",id:"install-tezos-dependencies",children:[]},{value:"Compile sources",id:"compile-sources",children:[]},{value:"PATH setup",id:"path-setup",children:[]}]},{value:"Build from source (MacOs)",id:"build-from-source-macos",children:[{value:"Install Homebrew",id:"install-homebrew",children:[]},{value:"Install the libraries that Tezos is dependent on",id:"install-the-libraries-that-tezos-is-dependent-on-1",children:[]},{value:"Install Rust",id:"install-rust-1",children:[]},{value:"Get sources",id:"get-sources-1",children:[]},{value:"Install the OPAM",id:"install-the-opam",children:[]},{value:"Install Tezos dependencies",id:"install-tezos-dependencies-1",children:[]},{value:"Compile sources",id:"compile-sources-1",children:[]},{value:"PATH setup",id:"path-setup-1",children:[]}]},{value:"References",id:"references",children:[]}],c={toc:i};function p(e){var t=e.components,n=(0,l.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"In this chapter, we will see how to install Tezos from source with Unbuntu and macOS."),(0,r.kt)("h2",{id:"build-from-source-ubuntu"},"Build from source (Ubuntu)"),(0,r.kt)("h3",{id:"install-the-libraries-that-tezos-is-dependent-on"},"Install the libraries that Tezos is dependent on"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"sudo apt update && sudo apt install -y rsync git m4 build-essential patch unzip bubblewrap wget pkg-config libgmp-dev libev-dev libhidapi-dev\n")),(0,r.kt)("p",null,"Type your password when prompted.\n",(0,r.kt)("inlineCode",{parentName:"p"},"[sudo] password for username:")),(0,r.kt)("h3",{id:"install-rust"},"Install Rust"),(0,r.kt)("p",null,"Compiling Tezos requires the Rust compiler and the Cargo package manager to be installed.\n//TODO On se retrouve avec les scripts dans Home, peut-\xeatre pour faire plus propre on pourrait cr\xe9er un r\xe9pertoire d\xe9di\xe9 ?"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cd $HOME\nwget https://sh.rustup.rs/rustup-init.sh\nchmod +x rustup-init.sh\n./rustup-init.sh --profile minimal --default-toolchain 1.44.0 -y\nsource $HOME/.cargo/env\n")),(0,r.kt)("h3",{id:"install-zcash-parameters"},"Install Zcash Parameters"),(0,r.kt)("p",null,"Tezos binaries require the Zcash parameter files to run."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"wget https://raw.githubusercontent.com/zcash/zcash/master/zcutil/fetch-params.sh\nchmod +x fetch-params.sh\n./fetch-params.sh\n")),(0,r.kt)("h3",{id:"install-opam"},"Install OPAM"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"wget https://github.com/ocaml/opam/releases/download/2.0.3/opam-2.0.3-x86_64-linux\nsudo cp opam-2.0.3-x86_64-linux /usr/local/bin/opam\nsudo chmod a+x /usr/local/bin/opam\n")),(0,r.kt)("h3",{id:"get-sources"},"Get sources"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://gitlab.com/tezos/tezos.git\ncd tezos\ngit checkout latest-release\n")),(0,r.kt)("h3",{id:"install-tezos-dependencies"},"Install Tezos dependencies"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"opam init --bare\nmake build-deps\n")),(0,r.kt)("p",null,"Answers the prompts with 'N' then 'y'."),(0,r.kt)("p",null,"You may also be prompted for your ",(0,r.kt)("inlineCode",{parentName:"p"},"sudo")," password."),(0,r.kt)("p",null,'You may encounter a "switch" error: You can ignore it. You may encounter failures in the processes for the ',(0,r.kt)("inlineCode",{parentName:"p"},"make build-deps")," command. In that case, just re-type the command to re-initiate."),(0,r.kt)("h3",{id:"compile-sources"},"Compile sources"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"eval $(opam env)\nmake\n")),(0,r.kt)("h3",{id:"path-setup"},"PATH setup"),(0,r.kt)("p",null,"Setting the path as below allows you to access tezos commands without having specified ",(0,r.kt)("inlineCode",{parentName:"p"},"./")," at the beginning of the command."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"export PATH=~/tezos:$PATH\nsource ./src/bin_client/bash-completion.sh\nexport TEZOS_CLIENT_UNSAFE_DISABLE_DISCLAIMER=Y\n")),(0,r.kt)("p",null,"You can quickly check the correct installations of some files:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-client --version\ntezos-admin-client --version\n")),(0,r.kt)("p",null,"The commands should return appropriate versions."),(0,r.kt)("h2",{id:"build-from-source-macos"},"Build from source (MacOs)"),(0,r.kt)("h3",{id:"install-homebrew"},"Install Homebrew"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"\n')),(0,r.kt)("h3",{id:"install-the-libraries-that-tezos-is-dependent-on-1"},"Install the libraries that Tezos is dependent on"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"brew install hidapi libev\n")),(0,r.kt)("p",null,"On Catalina you may see the following error if you have xcode installed:\n",(0,r.kt)("inlineCode",{parentName:"p"},'\u201cxcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun"')),(0,r.kt)("p",null,"If this is the case, then run the following command to update your xcode install and restart the terminal."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"xcode-select --install\n")),(0,r.kt)("h3",{id:"install-rust-1"},"Install Rust"),(0,r.kt)("p",null,"Compiling Tezos requires the Rust compiler and the Cargo package manager to be installed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl https://sh.rustup.rs -sSf | sh\nsource $HOME/.cargo/env\n")),(0,r.kt)("h3",{id:"get-sources-1"},"Get sources"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://gitlab.com/tezos/tezos.git\ncd tezos\ngit checkout latest-release\n")),(0,r.kt)("h3",{id:"install-the-opam"},"Install the OPAM"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"brew install gpatch\nbrew install opam\nopam init\nopam update\neval $(opam env)\n")),(0,r.kt)("h3",{id:"install-tezos-dependencies-1"},"Install Tezos dependencies"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cd tezos\nmake build-deps \n")),(0,r.kt)("p",null,'You may encounter a "switch" error: You can ignore it. You may encounter failures in the processes for the ',(0,r.kt)("inlineCode",{parentName:"p"},"make build-deps")," command. In that case, just re-type the command to re-initiate."),(0,r.kt)("h3",{id:"compile-sources-1"},"Compile sources"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"eval $(opam env)\nmake\n")),(0,r.kt)("h3",{id:"path-setup-1"},"PATH setup"),(0,r.kt)("p",null,"Setting the path as below allows you to access tezos commands without having specified ",(0,r.kt)("inlineCode",{parentName:"p"},"./")," at the beginning of the command."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"export PATH=~/tezos:$PATH\nexport TEZOS_CLIENT_UNSAFE_DISABLE_DISCLAIMER=Y\n")),(0,r.kt)("p",null,"You can quickly check the correct installations of some files:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-client --version\ntezos-admin-client --version\n")),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("p",null,"[1]"," ",(0,r.kt)("a",{parentName:"p",href:"https://tezos.gitlab.io/introduction/howtoget.html#setting-up-the-development-environment-from-scratch"},"https://tezos.gitlab.io/introduction/howtoget.html#setting-up-the-development-environment-from-scratch")),(0,r.kt)("p",null,"[2]"," ",(0,r.kt)("a",{parentName:"p",href:"https://www.coincashew.com/coins/overview-xtz/guide-how-to-setup-a-baker/install-a-tezos-node"},"https://www.coincashew.com/coins/overview-xtz/guide-how-to-setup-a-baker/install-a-tezos-node")),(0,r.kt)("p",null,"[3]"," ",(0,r.kt)("a",{parentName:"p",href:"https://tezbaker-io.medium.com/tezos-mainnet-setting-up-home-baking-on-a-mac-c7730a68c41d"},"https://tezbaker-io.medium.com/tezos-mainnet-setting-up-home-baking-on-a-mac-c7730a68c41d")))}p.isMDXComponent=!0}}]);