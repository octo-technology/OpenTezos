(self.webpackChunkopentezos=self.webpackChunkopentezos||[]).push([[5995],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return d},kt:function(){return u}});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=p(n),u=a,m=h["".concat(l,".").concat(u)]||h[u]||c[u]||r;return n?o.createElement(m,i(i({ref:t},d),{},{components:n})):o.createElement(m,i({ref:t},d))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var p=2;p<r;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},3362:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return i},metadata:function(){return s},toc:function(){return l},default:function(){return d}});var o=n(2122),a=n(9756),r=(n(7294),n(3905)),i={id:"set-up-a-node",title:"Set-up a node",authors:"Maxime Sallerin"},s={unversionedId:"deploy-a-node/set-up-a-node",id:"deploy-a-node/set-up-a-node",isDocsHomePage:!1,title:"Set-up a node",description:"In this chapter, we will see how to create and deploy your own node.",source:"@site/docs/deploy-a-node/set-up-a-node.md",sourceDirName:"deploy-a-node",slug:"/deploy-a-node/set-up-a-node",permalink:"/deploy-a-node/set-up-a-node",editUrl:"https://github.com/octo-technology/OpenTezos/tree/main/docs/deploy-a-node/set-up-a-node.md",version:"current",lastUpdatedBy:"MASA",lastUpdatedAt:1623404604,formattedLastUpdatedAt:"6/11/2021",frontMatter:{id:"set-up-a-node",title:"Set-up a node",authors:"Maxime Sallerin"},sidebar:"docs",previous:{title:"Installation",permalink:"/deploy-a-node/installation"},next:{title:"What about networks?",permalink:"/deploy-a-node/networks"}},l=[{value:"PATH Setup",id:"path-setup",children:[]},{value:"Node identity",id:"node-identity",children:[]},{value:"Node synchronisation",id:"node-synchronisation",children:[]},{value:"Starting the node",id:"starting-the-node",children:[]},{value:"Node configuration",id:"node-configuration",children:[]},{value:"Conclusion",id:"conclusion",children:[]},{value:"References",id:"references",children:[]}],p={toc:l};function d(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"In this chapter, we will see how to create and deploy your own node."),(0,r.kt)("h3",{id:"path-setup"},"PATH Setup"),(0,r.kt)("p",null,"Note that at the opening of each new terminal, you should set up the PATH. Otherwise, just add ",(0,r.kt)("inlineCode",{parentName:"p"},"./")," at the beginning of each command in this chapter."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"export PATH=~/tezos:$PATH\n")),(0,r.kt)("h3",{id:"node-identity"},"Node identity"),(0,r.kt)("p",null,"First, you must generate a new identity in order to connect to the Tezos network."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cd tezos\ntezos-node identity generate\n")),(0,r.kt)("p",null,"The identity comprises a pair of cryptographic keys that nodes use to encrypt messages sent to each other."),(0,r.kt)("p",null,"It will take some time to generate the keys. An ",(0,r.kt)("inlineCode",{parentName:"p"},"identity.json")," file will then be generated in the ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.tezos-node")," directory. It will contain our public and private keys. Keep it safe and secure!"),(0,r.kt)("p",null,"It is possible to define the directory where the data will be stored with ",(0,r.kt)("inlineCode",{parentName:"p"},"--data-dir")," (by default, in .tezos-node)"),(0,r.kt)("p",null,"By default, the network is Mainnet but, you can specify the network with the ",(0,r.kt)("inlineCode",{parentName:"p"},"--network")," option in the following command for Florencenet Network (for example): ",(0,r.kt)("inlineCode",{parentName:"p"},"tezos-node config init --data-dir ~/tezos-florencenet --network florencenet"),".\nMore about Networks in the ",(0,r.kt)("a",{parentName:"p",href:"/deploy-a-node/networks"},"next chapter"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Note that this is merely a network identity. It is not related in any way to a Tezos address on the blockchain.")),(0,r.kt)("h3",{id:"node-synchronisation"},"Node synchronisation"),(0,r.kt)("p",null,"Whenever a node starts, it tries to retrieve the most current head of the chain from its peers. This can be a long process if there are many blocks to retrieve."),(0,r.kt)("p",null,"So, rather than taking days to download the Tezos blockchain from the P2P network, a node can be quickly synchronized in a few minutes from ",(0,r.kt)("strong",{parentName:"p"},"snapshot"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"The term snapshot is a bit of an unfortunate term as it already has another meaning in Tezos, which is the schedule for baking rights. To be clear, the snapshot we are talking about is completely different from the baking rights snapshot. This snapshot is a compressed copy of the chain at a certain block.\nTo learn more about snapshots, ",(0,r.kt)("a",{parentName:"p",href:"https://blog.nomadic-labs.com/introducing-snapshots-and-history-modes-for-the-tezos-node.html"},"here")," is an article from Nomadics Labs.")),(0,r.kt)("h4",{id:"downloading-snapshot"},"Downloading snapshot"),(0,r.kt)("p",null,"Download the correct snapshot depending on whether you want to configure your node on the ",(0,r.kt)("a",{parentName:"p",href:"/deploy-a-node/networks#Mainnet"},"Mainnet")," or on a ",(0,r.kt)("a",{parentName:"p",href:"/deploy-a-node/networks#est-networks"},"Testnet"),"."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Download the last ",(0,r.kt)("strong",{parentName:"li"},"rolling")," snapshot on this site ",(0,r.kt)("a",{parentName:"li",href:"https://snapshots-tezos.giganode.io/"},"snapshots-tezos.giganode.io")," (use the 'WEB' link)",(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"The file is about 1.3 GB and should take a few minutes to download."))),(0,r.kt)("li",{parentName:"ol"},"Copy the file into the ",(0,r.kt)("inlineCode",{parentName:"li"},"/tezos")," folder.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"rolling mode")," are the most lightweight snapshots. Keeps a minimal rolling fragment of the chain and deleting everything before this fragment. Safe for baking, endorsing, and validating new blocks."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"full mode")," store all chain data since the beginning of the chain, but drop the archived contexts below the current checkpoint. Safe for baking, endorsing, and validating new blocks.")),(0,r.kt)("h4",{id:"importing-a-snapshot"},"Importing a snapshot"),(0,r.kt)("p",null,"The mechanism of Snapshots can help in reducing the synchronization time."),(0,r.kt)("p",null,"The following command bootstrap an empty Tezos node from the ",(0,r.kt)("inlineCode",{parentName:"p"},"<snapshot.rolling>")," file to a rolling Tezos node."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-node snapshot import <snapshot.rolling>\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"This command should take a few minutes.")),(0,r.kt)("h3",{id:"starting-the-node"},"Starting the node"),(0,r.kt)("p",null,"With the following command, the node will now catch up syncing with the live network."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-node run --rpc-addr 127.0.0.1:8732 --log-output tezos.log &\n")),(0,r.kt)("p",null,"The parameter ",(0,r.kt)("inlineCode",{parentName:"p"},"--rpc-addr url:port")," activates the RPC interface that will allow communication with the node. By default, it runs on port ",(0,r.kt)("inlineCode",{parentName:"p"},"8732"),", so it is not mandatory to specify it."),(0,r.kt)("p",null,"Watch the progress by viewing tezos.log"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tail -f tezos.log\n")),(0,r.kt)("p",null,"To stop viewing the log, press CTRL+C (Ubuntu and Mac OS)."),(0,r.kt)("p",null,"The Tezos client can be used to interact with the node. It can query its status or ask the node to perform some actions. For example, after starting your node, you can check if it has finished synchronizing with the following command (you can use another terminal window if you still watch the log) :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tezos-client bootstrapped\n")),(0,r.kt)("p",null,"When you see the message ",(0,r.kt)("inlineCode",{parentName:"p"},"Node is Bootstrapped"),", your Tezos node is synced with the blockchain, and you may now perform operations on the latter."),(0,r.kt)("p",null,"Congratulations on setting up a node!"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Be careful closing terminal windows because ",(0,r.kt)("strong",{parentName:"p"},"this stops the node"),".")),(0,r.kt)("h2",{id:"node-configuration"},"Node configuration"),(0,r.kt)("p",null,"If you want to know more about possible alternative node configurations, check out ",(0,r.kt)("a",{parentName:"p",href:"https://tezos.gitlab.io/user/node-configuration.html"},"Node Configuration")),(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"In this module, we have seen how to install Tezos from sources, create our own node, synchronize it with the blockchain and finally launch it."),(0,r.kt)("p",null,"This module is a prerequisite to becoming a baker, and the ",(0,r.kt)("a",{parentName:"p",href:"/baker"},"Deploy Bakers")," module explains how to become a baker and start earning XTZ rewards."),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("p",null,"[1]"," ",(0,r.kt)("a",{parentName:"p",href:"https://tezos.gitlab.io/introduction/howtouse.html#node-identity"},"https://tezos.gitlab.io/introduction/howtouse.html#node-identity")),(0,r.kt)("p",null,"[2]"," ",(0,r.kt)("a",{parentName:"p",href:"https://www.coincashew.com/coins/overview-xtz/guide-how-to-setup-a-baker/install-a-tezos-node"},"https://www.coincashew.com/coins/overview-xtz/guide-how-to-setup-a-baker/install-a-tezos-node")),(0,r.kt)("p",null,"[3]"," ",(0,r.kt)("a",{parentName:"p",href:"https://quantifyfitness.com/how-to-solo-bake-tezos-step-by-step-guide/"},"https://quantifyfitness.com/how-to-solo-bake-tezos-step-by-step-guide/")),(0,r.kt)("p",null,"[4]"," ",(0,r.kt)("a",{parentName:"p",href:"https://blog.nomadic-labs.com/introducing-snapshots-and-history-modes-for-the-tezos-node.html"},"https://blog.nomadic-labs.com/introducing-snapshots-and-history-modes-for-the-tezos-node.html")),(0,r.kt)("p",null,"[5]"," ",(0,r.kt)("a",{parentName:"p",href:"https://tezos.gitlab.io/user/node-configuration.html"},"https://tezos.gitlab.io/user/node-configuration.html")))}d.isMDXComponent=!0}}]);